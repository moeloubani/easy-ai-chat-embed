{"version":3,"file":"index.js","mappings":"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","sources":["webpack://easy-ai-chat-embed/./node_modules/react-chatbot-kit/build/index.js","webpack://easy-ai-chat-embed/./node_modules/react-chatbot-kit/build/main.css","webpack://easy-ai-chat-embed/./node_modules/react-conditionally-render/dist/index.js","webpack://easy-ai-chat-embed/./src/block/edit.js","webpack://easy-ai-chat-embed/./src/block/editor.scss","webpack://easy-ai-chat-embed/./src/block/index.js","webpack://easy-ai-chat-embed/./src/block/save.js","webpack://easy-ai-chat-embed/./src/block/style.scss","webpack://easy-ai-chat-embed/./src/chatbot/ActionProvider.js","webpack://easy-ai-chat-embed/./src/chatbot/MessageParser.js","webpack://easy-ai-chat-embed/./src/chatbot/config.js","webpack://easy-ai-chat-embed/./src/frontend.js","webpack://easy-ai-chat-embed/./src/frontend.scss","webpack://easy-ai-chat-embed/./src/index.js","webpack://easy-ai-chat-embed/external window [\"wp\",\"blockEditor\"]","webpack://easy-ai-chat-embed/external window [\"wp\",\"blocks\"]","webpack://easy-ai-chat-embed/external window [\"wp\",\"components\"]","webpack://easy-ai-chat-embed/external window [\"wp\",\"element\"]","webpack://easy-ai-chat-embed/external window [\"wp\",\"i18n\"]","webpack://easy-ai-chat-embed/external window \"React\"","webpack://easy-ai-chat-embed/external window \"ReactJSXRuntime\"","webpack://easy-ai-chat-embed/webpack/bootstrap","webpack://easy-ai-chat-embed/webpack/runtime/chunk loaded","webpack://easy-ai-chat-embed/webpack/runtime/compat get default export","webpack://easy-ai-chat-embed/webpack/runtime/define property getters","webpack://easy-ai-chat-embed/webpack/runtime/hasOwnProperty shorthand","webpack://easy-ai-chat-embed/webpack/runtime/make namespace object","webpack://easy-ai-chat-embed/webpack/runtime/jsonp chunk loading","webpack://easy-ai-chat-embed/webpack/before-startup","webpack://easy-ai-chat-embed/webpack/startup","webpack://easy-ai-chat-embed/webpack/after-startup"],"sourcesContent":["(()=>{\"use strict\";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},t={};e.r(t),e.d(t,{Chatbot:()=>B,createChatBotMessage:()=>i,createClientMessage:()=>u,createCustomMessage:()=>l,default:()=>H,useChatbot:()=>T});const r=require(\"react\");var a=e.n(r);const n=require(\"react-conditionally-render\");var o=e.n(n),s=function(){return s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)},c=function(e,t){return{message:e,type:t,id:Math.round(Date.now()*Math.random())}},i=function(e,t){return s(s(s({},c(e,\"bot\")),t),{loading:!0})},l=function(e,t,r){return s(s({},c(e,t)),r)},u=function(e,t){return s(s({},c(e,\"user\")),t)},m=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(e)return e.apply(void 0,t)};function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},g.apply(this,arguments)}const d=({styles:e={},...t})=>a().createElement(\"svg\",g({xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 512 512\"},t),a().createElement(\"path\",{d:\"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z\"})),f=function(e){var t=e.message,r=e.customComponents;return a().createElement(\"div\",{className:\"react-chatbot-kit-user-chat-message-container\"},a().createElement(o(),{condition:!!r.userChatMessage,show:m(r.userChatMessage,{message:t}),elseShow:a().createElement(\"div\",{className:\"react-chatbot-kit-user-chat-message\"},t,a().createElement(\"div\",{className:\"react-chatbot-kit-user-chat-message-arrow\"}))}),a().createElement(o(),{condition:!!r.userAvatar,show:m(r.userAvatar),elseShow:a().createElement(\"div\",{className:\"react-chatbot-kit-user-avatar\"},a().createElement(\"div\",{className:\"react-chatbot-kit-user-avatar-container\"},a().createElement(d,{className:\"react-chatbot-kit-user-avatar-icon\"})))}))},h=function(){return a().createElement(\"div\",{className:\"react-chatbot-kit-chat-bot-avatar\"},a().createElement(\"div\",{className:\"react-chatbot-kit-chat-bot-avatar-container\"},a().createElement(\"p\",{className:\"react-chatbot-kit-chat-bot-avatar-letter\"},\"B\")))},p=function(){return a().createElement(\"div\",{className:\"chatbot-loader-container\"},a().createElement(\"svg\",{id:\"dots\",width:\"50px\",height:\"21px\",viewBox:\"0 0 132 58\",version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\"},a().createElement(\"g\",{stroke:\"none\",fill:\"none\"},a().createElement(\"g\",{id:\"chatbot-loader\",fill:\"#fff\"},a().createElement(\"circle\",{id:\"chatbot-loader-dot1\",cx:\"25\",cy:\"30\",r:\"13\"}),a().createElement(\"circle\",{id:\"chatbot-loader-dot2\",cx:\"65\",cy:\"30\",r:\"13\"}),a().createElement(\"circle\",{id:\"chatbot-loader-dot3\",cx:\"105\",cy:\"30\",r:\"13\"})))))};var v=function(){return v=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},v.apply(this,arguments)};const y=function(e){var t=e.message,n=e.withAvatar,s=void 0===n||n,c=e.loading,i=e.messages,l=e.customComponents,u=e.setState,g=e.customStyles,d=e.delay,f=e.id,y=(0,r.useState)(!1),b=y[0],w=y[1];(0,r.useEffect)((function(){var e;return function(t,r){var a=750;d&&(a+=d),e=setTimeout((function(){var e=function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}([],t,!0).find((function(e){return e.id===f}));e&&(e.loading=!1,e.delay=void 0,r((function(t){var r=t.messages,a=r.findIndex((function(e){return e.id===f}));return r[a]=e,v(v({},t),{messages:r})})))}),a)}(i,u),function(){clearTimeout(e)}}),[d,f]),(0,r.useEffect)((function(){d?setTimeout((function(){return w(!0)}),d):w(!0)}),[d]);var E={backgroundColor:\"\"},P={borderRightColor:\"\"};return g&&(E.backgroundColor=g.backgroundColor,P.borderRightColor=g.backgroundColor),a().createElement(o(),{condition:b,show:a().createElement(\"div\",{className:\"react-chatbot-kit-chat-bot-message-container\"},a().createElement(o(),{condition:s,show:a().createElement(o(),{condition:!!(null==l?void 0:l.botAvatar),show:m(null==l?void 0:l.botAvatar),elseShow:a().createElement(h,null)})}),a().createElement(o(),{condition:!!(null==l?void 0:l.botChatMessage),show:m(null==l?void 0:l.botChatMessage,{message:t,loader:a().createElement(p,null)}),elseShow:a().createElement(\"div\",{className:\"react-chatbot-kit-chat-bot-message\",style:E},a().createElement(o(),{condition:c,show:a().createElement(p,null),elseShow:a().createElement(\"span\",null,t)}),a().createElement(o(),{condition:s,show:a().createElement(\"div\",{className:\"react-chatbot-kit-chat-bot-message-arrow\",style:P})}))}))})};function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},b.apply(this,arguments)}const w=({styles:e={},...t})=>a().createElement(\"svg\",b({xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 512 512\"},t),a().createElement(\"path\",{d:\"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z\"}));var E=function(){return E=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},E.apply(this,arguments)},P=function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};const S=function(e){var t=e.state,n=e.setState,s=e.widgetRegistry,i=e.messageParser,l=e.parse,u=e.customComponents,m=e.actionProvider,g=e.botName,d=e.customStyles,h=e.headerText,p=e.customMessages,v=e.placeholderText,b=e.validator,S=e.disableScrollToBottom,O=e.messageHistory,k=e.actions,M=e.messageContainerRef,C=t.messages,N=(0,r.useState)(\"\"),x=N[0],j=N[1],T=function(){setTimeout((function(){var e;M.current&&(M.current.scrollTop=null===(e=null==M?void 0:M.current)||void 0===e?void 0:e.scrollHeight)}),50)};(0,r.useEffect)((function(){S||T()}));var A=function(){n((function(e){return E(E({},e),{messages:P(P([],e.messages,!0),[c(x,\"user\")],!1)})})),T(),j(\"\")},B={backgroundColor:\"\"};d&&d.chatButton&&(B.backgroundColor=d.chatButton.backgroundColor);var H=\"Conversation with \"+g;h&&(H=h);var I=\"Write your message here\";return v&&(I=v),a().createElement(\"div\",{className:\"react-chatbot-kit-chat-container\"},a().createElement(\"div\",{className:\"react-chatbot-kit-chat-inner-container\"},a().createElement(o(),{condition:!!u.header,show:u.header&&u.header(m),elseShow:a().createElement(\"div\",{className:\"react-chatbot-kit-chat-header\"},H)}),a().createElement(\"div\",{className:\"react-chatbot-kit-chat-message-container\",ref:M},a().createElement(o(),{condition:\"string\"==typeof O&&Boolean(O),show:a().createElement(\"div\",{dangerouslySetInnerHTML:{__html:O}})}),C.map((function(e,r){return\"bot\"===e.type?a().createElement(a().Fragment,{key:e.id},function(e,r){var c;c=e.withAvatar?e.withAvatar:function(e,t){if(0===t)return!0;var r=e[t-1];return!(\"bot\"===r.type&&!r.widget)}(C,r);var i=E(E({},e),{setState:n,state:t,customComponents:u,widgetRegistry:s,messages:C,actions:k});if(e.widget){var l=s.getWidget(i.widget,E(E({},t),{scrollIntoView:T,payload:e.payload,actions:k}));return a().createElement(a().Fragment,null,a().createElement(y,E({customStyles:d.botMessageBox,withAvatar:c},i,{key:e.id})),a().createElement(o(),{condition:!i.loading,show:l||null}))}return a().createElement(y,E({customStyles:d.botMessageBox,key:e.id,withAvatar:c},i,{customComponents:u,messages:C,setState:n}))}(e,r)):\"user\"===e.type?a().createElement(a().Fragment,{key:e.id},function(e){var r=s.getWidget(e.widget,E(E({},t),{scrollIntoView:T,payload:e.payload,actions:k}));return a().createElement(a().Fragment,null,a().createElement(f,{message:e.message,key:e.id,customComponents:u}),r||null)}(e)):function(e,t){return!!t[e.type]}(e,p)?a().createElement(a().Fragment,{key:e.id},function(e){var r=p[e.type],o={setState:n,state:t,scrollIntoView:T,actionProvider:m,payload:e.payload,actions:k};if(e.widget){var c=s.getWidget(e.widget,E(E({},t),{scrollIntoView:T,payload:e.payload,actions:k}));return a().createElement(a().Fragment,null,r(o),c||null)}return r(o)}(e)):void 0})),a().createElement(\"div\",{style:{paddingBottom:\"15px\"}})),a().createElement(\"div\",{className:\"react-chatbot-kit-chat-input-container\"},a().createElement(\"form\",{className:\"react-chatbot-kit-chat-input-form\",onSubmit:function(e){if(e.preventDefault(),b&&\"function\"==typeof b){if(b(x)){if(A(),l)return l(x);i.parse(x)}}else{if(A(),l)return l(x);i.parse(x)}}},a().createElement(\"input\",{className:\"react-chatbot-kit-chat-input\",placeholder:I,value:x,onChange:function(e){return j(e.target.value)}}),a().createElement(\"button\",{className:\"react-chatbot-kit-chat-btn-send\",style:B},a().createElement(w,{className:\"react-chatbot-kit-chat-btn-send-icon\"}))))))},O=function(e){var t=e.message;return a().createElement(\"div\",{className:\"react-chatbot-kit-error\"},a().createElement(\"h1\",{className:\"react-chatbot-kit-error-header\"},\"Ooops. Something is missing.\"),a().createElement(\"div\",{className:\"react-chatbot-kit-error-container\"},a().createElement(y,{message:t,withAvatar:!0,loading:!1,id:1,customStyles:{backgroundColor:\"\"},messages:[]})),a().createElement(\"a\",{href:\"https://fredrikoseberg.github.io/react-chatbot-kit-docs/\",rel:\"noopener norefferer\",target:\"_blank\",className:\"react-chatbot-kit-error-docs\"},\"View the docs\"))};var k=function(e){return e.widgets?e.widgets:[]},M=function(e){try{new e}catch(e){return!1}return!0},C=function(){return C=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},C.apply(this,arguments)};const N=function(e,t){var r=this;this.addWidget=function(e,t){var a=e.widgetName,n=e.widgetFunc,o=e.mapStateToProps,s=e.props;r[a]={widget:n,props:s,mapStateToProps:o,parentProps:C({},t)}},this.getWidget=function(e,t){var a=r[e];if(a){var n,o=C(C(C(C({scrollIntoView:t.scrollIntoView},a.parentProps),\"object\"==typeof(n=a.props)?n:{}),r.mapStateToProps(a.mapStateToProps,t)),{setState:r.setState,actionProvider:r.actionProvider||t.actions,actions:t.actions,state:t,payload:t.payload});return a.widget(o)||null}},this.mapStateToProps=function(e,t){if(e)return e.reduce((function(e,r){return e[r]=t[r],e}),{})},this.setState=e,this.actionProvider=t};var x=function(){return x=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},x.apply(this,arguments)},j=function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};const T=function(e){var t=e.config,n=e.actionProvider,o=e.messageParser,s=e.messageHistory,c=e.runInitialMessagesWithHistory,m=e.saveMessages,g=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}(e,[\"config\",\"actionProvider\",\"messageParser\",\"messageHistory\",\"runInitialMessagesWithHistory\",\"saveMessages\"]),d=\"\",f=\"\";if(!t||!n||!o)return{configurationError:d=\"I think you forgot to feed me some props. Did you remember to pass a config, a messageparser and an actionprovider?\"};var h=function(e,t){var r=[];return e.initialMessages||r.push(\"Config must contain property 'initialMessages', and it expects it to be an array of chatbotmessages.\"),r}(t);if(h.length)return{invalidPropsError:f=h.reduce((function(e,t){return e+t}),\"\")};var p=function(e){return e.state?e.state:{}}(t);s&&Array.isArray(s)?t.initialMessages=j([],s,!0):\"string\"==typeof s&&Boolean(s)&&(c||(t.initialMessages=[]));var v,y,b,w=a().useState(x({messages:j([],t.initialMessages,!0)},p)),E=w[0],P=w[1],S=a().useRef(E.messages),O=a().useRef(),C=a().useRef();(0,r.useEffect)((function(){S.current=E.messages})),(0,r.useEffect)((function(){s&&Array.isArray(s)&&P((function(e){return x(x({},e),{messages:s})}))}),[]),(0,r.useEffect)((function(){var e=C.current;return function(){if(m&&\"function\"==typeof m){var t=e.innerHTML.toString();m(S.current,t)}}}),[]),(0,r.useEffect)((function(){O.current=E}),[E]);var T=n,A=o;return M(T)&&M(A)?(v=new n(i,P,u,O.current,l,g),y=new N(P,v),b=new o(v,O.current),k(t).forEach((function(e){return null==y?void 0:y.addWidget(e,g)}))):(v=n,b=o,y=new N(P,null),k(t).forEach((function(e){return null==y?void 0:y.addWidget(e,g)}))),{widgetRegistry:y,actionProv:v,messagePars:b,configurationError:d,invalidPropsError:f,state:E,setState:P,messageContainerRef:C,ActionProvider:T,MessageParser:A}};var A=function(){return A=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},A.apply(this,arguments)};const B=function(e){var t=e.actionProvider,r=e.messageParser,n=e.config,o=e.headerText,s=e.placeholderText,c=e.saveMessages,l=e.messageHistory,u=e.runInitialMessagesWithHistory,m=e.disableScrollToBottom,g=e.validator,d=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}(e,[\"actionProvider\",\"messageParser\",\"config\",\"headerText\",\"placeholderText\",\"saveMessages\",\"messageHistory\",\"runInitialMessagesWithHistory\",\"disableScrollToBottom\",\"validator\"]),f=T(A({config:n,actionProvider:t,messageParser:r,messageHistory:l,saveMessages:c,runInitialMessagesWithHistory:u},d)),h=f.configurationError,p=f.invalidPropsError,v=f.ActionProvider,y=f.MessageParser,b=f.widgetRegistry,w=f.messageContainerRef,E=f.actionProv,P=f.messagePars,k=f.state,C=f.setState;if(h)return a().createElement(O,{message:h});if(p.length)return a().createElement(O,{message:p});var N=function(e){return e.customStyles?e.customStyles:{}}(n),x=function(e){return e.customComponents?e.customComponents:{}}(n),j=function(e){return e.botName?e.botName:\"Bot\"}(n),B=function(e){return e.customMessages?e.customMessages:{}}(n);return M(v)&&M(y)?a().createElement(S,{state:k,setState:C,widgetRegistry:b,actionProvider:E,messageParser:P,customMessages:B,customComponents:A({},x),botName:j,customStyles:A({},N),headerText:o,placeholderText:s,validator:g,messageHistory:l,disableScrollToBottom:m,messageContainerRef:w}):a().createElement(v,{state:k,setState:C,createChatBotMessage:i},a().createElement(y,null,a().createElement(S,{state:k,setState:C,widgetRegistry:b,actionProvider:v,messageParser:y,customMessages:B,customComponents:A({},x),botName:j,customStyles:A({},N),headerText:o,placeholderText:s,validator:g,messageHistory:l,disableScrollToBottom:m,messageContainerRef:w})))},H=B;module.exports=t})();","// extracted by mini-css-extract-plugin\nexport {};","(()=>{\"use strict\";var e={d:(o,r)=>{for(var n in r)e.o(r,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:r[n]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>r});const r=function(e){var o=e.condition,r=e.show,n=e.elseShow,t=function(e){return\"function\"==typeof e},u=function(e){return e()||(console.warn(\"Nothing was returned from your render function. Please make sure you are returning a valid React element.\"),null)};return o?t(r)?u(r):r:!o&&n?t(n)?u(n):n:null};module.exports=o})();","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps, InspectorControls } from '@wordpress/block-editor';\nimport { PanelBody, SelectControl, TextareaControl, TextControl } from '@wordpress/components';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport './editor.scss'; // We might add editor-specific styles later\n\n// Define the available models\nconst modelOptions = [\n\t{ label: __( 'Select a Model', 'easy-ai-chat-embed' ), value: '' },\n\t{ label: 'ChatGPT 4.0', value: 'gpt-4o-mini' },\n\t{ label: 'Claude Sonnet 3.7', value: 'claude-3-7-sonnet-20250219' },\n\t{ label: 'Google Gemini', value: 'gemini-2.0-flash-lite' },\n];\n\n/**\n * The edit function describes the structure of your block in the context of the\n * editor. This represents what the editor will render when the block is used.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#edit\n *\n * @param {Object}   props               Properties passed to the function.\n * @param {Object}   props.attributes    Available block attributes.\n * @param {Function} props.setAttributes Function to update block attributes.\n * @param {string}   props.clientId      Unique ID for the block instance.\n * @return {Element} Element to render.\n */\nexport default function Edit( { attributes, setAttributes, clientId } ) {\n\tconst blockProps = useBlockProps();\n\tconst { selectedModel, initialPrompt, chatbotName, instanceId } = attributes;\n\n\t// Ensure a unique instance ID is set for each block\n\tuseEffect( () => {\n\t\tif ( ! instanceId ) {\n\t\t\t// Use clientId as a fallback if uuid generation fails or isn't available easily\n\t\t\t// A truly persistent ID might require a different approach if clientId changes often.\n\t\t\t// For now, relying on clientId and the attribute should suffice for initial setup.\n\t\t\tsetAttributes( { instanceId: `eace-${clientId}` } );\n\t\t}\n\t}, [ clientId, instanceId, setAttributes ] );\n\n\treturn (\n\t\t<div { ...blockProps }>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'AI Model Settings', 'easy-ai-chat-embed' ) }>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Select AI Model', 'easy-ai-chat-embed' ) }\n\t\t\t\t\t\tvalue={ selectedModel }\n\t\t\t\t\t\toptions={ modelOptions }\n\t\t\t\t\t\tonChange={ ( newModel ) =>\n\t\t\t\t\t\t\tsetAttributes( { selectedModel: newModel } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={ __( 'Initial System Prompt', 'easy-ai-chat-embed' ) }\n\t\t\t\t\t\thelp={ __( 'Optional text prepended to every user prompt to guide the AI.', 'easy-ai-chat-embed' ) }\n\t\t\t\t\t\tvalue={ initialPrompt }\n\t\t\t\t\t\tonChange={ ( newPrompt ) =>\n\t\t\t\t\t\t\tsetAttributes( { initialPrompt: newPrompt } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Chatbot Name', 'easy-ai-chat-embed' ) }\n\t\t\t\t\t\thelp={ __( 'Optional name for this specific chat instance. Leave blank to use the default.', 'easy-ai-chat-embed' ) }\n\t\t\t\t\t\tvalue={ chatbotName }\n\t\t\t\t\t\tonChange={ ( newName ) =>\n\t\t\t\t\t\t\tsetAttributes( { chatbotName: newName } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<p>\n\t\t\t\t{ __( 'AI Chat Embed Placeholder - Configure in sidebar.', 'easy-ai-chat-embed' ) }\n\t\t\t</p>\n\t\t\t{ /* We will add the actual chat preview here later */ }\n\t\t</div>\n\t);\n} ","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\nimport './style.scss';\nimport './editor.scss';\n\n/**\n * Register the block\n */\nregisterBlockType( metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n\n\t/**\n\t * @see ./save.js\n\t */\n\tsave,\n} ); ","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps } from '@wordpress/block-editor';\n\n/**\n * The save function defines the way in which the different attributes should\n * be combined into the final markup, which is then serialized by the block\n * editor into `post_content`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#save\n *\n * @param {Object} props            Properties passed to the function.\n * @param {Object} props.attributes Available block attributes.\n * @return {Element} Element to render.\n */\nexport default function save( { attributes } ) {\n\tconst blockProps = useBlockProps.save();\n\tconst { selectedModel, initialPrompt, instanceId } = attributes;\n\n\t// Combine blockProps className with our specific instance class\n\tconst divClass = `${ blockProps.className ? blockProps.className + ' ' : '' }easy-ai-chat-embed-instance`;\n\n\t// We render a simple div container. The actual chat interface\n\t// will be mounted client-side by a separate script that finds this div.\n\treturn (\n\t\t<div\n\t\t\t{ ...blockProps }\n\t\t\tclassName={ divClass }\n\t\t\tdata-selected-model={ selectedModel }\n\t\t\tdata-initial-prompt={ initialPrompt }\n\t\t\tdata-instance-id={ instanceId }\n\t\t>\n\t\t\t{ /* Chat interface will load here */ }\n      {/* Adding anoscript fallback or simple text might be good */}\n      <noscript>\n        { __( 'Please enable JavaScript to use the AI Chat.', 'easy-ai-chat-embed' ) }\n      </noscript>\n\t\t</div>\n\t);\n} ","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\n\n/**\n * External dependencies\n */\nimport { createClientMessage, createChatBotMessage } from 'react-chatbot-kit';\n\nclass ActionProvider {\n\tconstructor(createChatBotMessage, setStateFunc, createClientMessage) {\n\t\tthis.createChatBotMessage = createChatBotMessage;\n\t\tthis.setState = setStateFunc;\n\t\tthis.createClientMessage = createClientMessage;\n\t}\n\n\t// Main handler for user messages - now delegates to smaller functions\n\thandleUserMessage = async (userMessage, currentState) => {\n\t\t// 1. Get the appropriate instance\n\t\tconst instance = this.getAppropriateInstance(currentState);\n\t\tif (!instance) {\n\t\t\treturn; // Error already handled in getAppropriateInstance\n\t\t}\n\t\t\n\t\tconst { instanceId, selectedModel, initialPrompt, ajaxUrl, nonce } = instance;\n\t\t\n\t\t// 2. Show loading indicator\n\t\tthis.showLoadingIndicator();\n\t\t\n\t\t// 3. Format conversation history\n\t\tconst conversationHistory = this.formatConversationHistory(currentState);\n\n\t\t// 4. Prepare request data\n\t\tconst requestData = {\n\t\t\taction: 'easy_ai_chat_embed_send_message',\n\t\t\t_ajax_nonce: nonce,\n\t\t\tmessage: userMessage,\n\t\t\tinstanceId: instanceId,\n\t\t\tselectedModel: selectedModel,\n\t\t\tinitialPrompt: initialPrompt,\n\t\t\tconversationHistory: JSON.stringify(conversationHistory)\n\t\t};\n\t\t\n\t\t// 5. Send the request and handle response\n\t\ttry {\n\t\t\tconst result = await this.sendApiRequest(ajaxUrl, requestData);\n\t\t\tthis.handleApiResponse(result);\n\t\t} catch (error) {\n\t\t\tthis.handleApiError(error);\n\t\t}\n\t};\n\t\n\t// Get the appropriate instance based on current state\n\tgetAppropriateInstance = (currentState) => {\n\t\t// Get current instance ID from state if available\n\t\tlet currentInstanceId = '';\n\t\tif (currentState && currentState.instanceId) {\n\t\t\tcurrentInstanceId = currentState.instanceId;\n\t\t}\n\t\t\n\t\t// Get instance data from global object\n\t\tconst instances = window.easyAiChatInstances || {};\n\t\t\n\t\t// No instances found\n\t\tif (Object.keys(instances).length === 0) {\n\t\t\tconsole.error('No chat instances found in global storage');\n\t\t\tconst errorMessage = this.createChatBotMessage(\n\t\t\t\t__(\"I'm unable to process your request at this time. Please try again later.\", 'easy-ai-chat-embed')\n\t\t\t);\n\t\t\tthis.addMessageToState(errorMessage);\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\t// First try to find the matching instance by ID from state\n\t\tlet instance = null;\n\t\tif (currentInstanceId && instances[currentInstanceId]) {\n\t\t\tinstance = instances[currentInstanceId];\n\t\t} else {\n\t\t\t// Fallback to the first instance as before\n\t\t\tconst instanceKeys = Object.keys(instances);\n\t\t\tinstance = instances[instanceKeys[0]];\n\t\t\tconsole.warn('Using fallback instance selection mechanism');\n\t\t}\n\t\t\n\t\treturn instance;\n\t};\n\t\n\t// Show the loading indicator\n\tshowLoadingIndicator = () => {\n\t\tconst loadingMessage = this.createChatBotMessage('Thinking...');\n\t\tthis.addMessageToState(loadingMessage);\n\t};\n\t\n\t// Format conversation history from current state\n\tformatConversationHistory = (currentState) => {\n\t\tlet conversationHistory = [];\n\t\tif (currentState && Array.isArray(currentState.messages)) {\n\t\t\tconversationHistory = currentState.messages.map(message => ({\n\t\t\t\ttype: message.type, // 'bot' or 'user'\n\t\t\t\tmessage: message.message\n\t\t\t}));\n\t\t} else {\n\t\t\t// Only log warning, don't expose to user\n\t\t\tconsole.warn('ActionProvider: currentState or currentState.messages not available for history.');\n\t\t}\n\t\treturn conversationHistory;\n\t};\n\t\n\t// Send API request and get response\n\tsendApiRequest = async (ajaxUrl, requestData) => {\n\t\tconst response = await fetch(ajaxUrl, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t},\n\t\t\tbody: new URLSearchParams(requestData).toString()\n\t\t});\n\t\t\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\n\t\t}\n\t\t\n\t\treturn await response.json();\n\t};\n\t\n\t// Handle successful API response\n\thandleApiResponse = (result) => {\n\t\t// Remove loading message\n\t\tthis.removeLastMessage();\n\t\t\n\t\t// Display response or error message\n\t\tif (result.success && result.data.message) {\n\t\t\tconst botResponse = this.createChatBotMessage(result.data.message);\n\t\t\tthis.addMessageToState(botResponse);\n\t\t} else {\n\t\t\t// Log detailed error for debugging\n\t\t\tconsole.error('API Error:', result.data?.message || 'Unknown error');\n\t\t\t// Show generic message to user\n\t\t\tconst botError = this.createChatBotMessage(\n\t\t\t\t__('Sorry, I encountered a problem processing your request. Please try again later.', 'easy-ai-chat-embed')\n\t\t\t);\n\t\t\tthis.addMessageToState(botError);\n\t\t}\n\t};\n\t\n\t// Handle API errors\n\thandleApiError = (error) => {\n\t\t// Log the full error to console for debugging\n\t\tconsole.error('Error calling backend API:', error);\n\t\t// Remove loading message\n\t\tthis.removeLastMessage();\n\t\t// Show generic message to users\n\t\tconst botError = this.createChatBotMessage(\n\t\t\t__('Sorry, I was unable to connect to the AI service. Please try again later.', 'easy-ai-chat-embed')\n\t\t);\n\t\tthis.addMessageToState(botError);\n\t};\n\t\n\t// Helper to add messages to state\n\taddMessageToState = (message) => {\n\t\tthis.setState((prevState) => ({\n\t\t\t...prevState,\n\t\t\tmessages: [...prevState.messages, message]\n\t\t}));\n\t};\n\t\n\t// Helper to remove the last message\n\tremoveLastMessage = () => {\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tmessages: prevState.messages.slice(0, -1)\n\t\t}));\n\t};\n}\n\nexport default ActionProvider;","// src/chatbot/MessageParser.js\nclass MessageParser {\n\tconstructor( actionProvider, state ) {\n\t\tthis.actionProvider = actionProvider;\n\t\tthis.state = state || {}; // Add fallback for undefined state\n\t}\n\n\tparse( message ) {\n\t\t// console.log( 'User message:', message ); // Log user input\n\t\t// console.log( 'Current state:', this.state ); // Log state for debugging\n\n\t\t// Simple implementation: pass every non-empty message to the action provider\n\t\tif ( message.trim() !== '' ) {\n\t\t\t// Attempt to get the container the chatbot is running in\n\t\t\t// This helps with finding the correct instance ID\n\t\t\tlet instanceId = '';\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// Try to find the instance ID from the DOM\n\t\t\t\tconst container = document.querySelector('[data-eace-current-instance]');\n\t\t\t\tif (container) {\n\t\t\t\t\tinstanceId = container.getAttribute('data-eace-current-instance');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If we still don't have an ID from the DOM and this.state exists,\n\t\t\t\t// try to get it from state\n\t\t\t\tif (!instanceId && this.state && this.state.instanceId) {\n\t\t\t\t\tinstanceId = this.state.instanceId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Create a minimal state object if none exists\n\t\t\t\tconst safeState = this.state || {};\n\t\t\t\t\n\t\t\t\t// Override the instanceId in the state if we found one in the DOM\n\t\t\t\tif (instanceId) {\n\t\t\t\t\tsafeState.instanceId = instanceId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Pass the message and safe state to the action provider\n\t\t\t\tthis.actionProvider.handleUserMessage( message, safeState );\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error in MessageParser.parse:', error);\n\t\t\t\t// Even on error, try to pass the message to avoid a broken UX\n\t\t\t\tthis.actionProvider.handleUserMessage( message, { instanceId } );\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default MessageParser;\n\n","/**\n * External dependencies\n */\nimport { createChatBotMessage } from 'react-chatbot-kit';\n\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\n\n// const botName = 'AIChatBot'; // No longer needed as a fixed constant here\n\n// Basic config for the chatbot\nconst configFn = ( instanceId, initialPrompt, selectedModel, chatbotName, ajaxUrl, nonce, initialState, isBlock, isShortcode, isElementor ) => ( {\n\tbotName: chatbotName, // Use the passed chatbotName\n\tlang: 'en',\n\tinitialMessages: [\n\t\tcreateChatBotMessage(\n\t\t\t`Hello! I am ${chatbotName}. How can I help you today? (Using ${selectedModel})` // Use dynamic chatbot name\n\t\t),\n\t\t// You could add the initialPrompt as a system message here if desired,\n\t\t// but typically it's handled server-side before sending to the AI API.\n\t],\n\tstate: {\n\t\tinstanceId: instanceId, // Store instance ID for API calls\n\t\tinitialPrompt: initialPrompt, // Store initial prompt\n\t\tselectedModel: selectedModel,\n\t\tajaxUrl: ajaxUrl,         // Add ajaxUrl to state\n\t\tnonce: nonce,             // Add nonce to state\n\t\tisBlock: isBlock,           // Add isBlock flag\n\t\tisShortcode: isShortcode,   // Add isShortcode flag\n\t\tisElementor: isElementor,   // Add isElementor flag\n\t\tchatbotName: chatbotName, // Store chatbotName in state too\n\t\t...initialState         // Merge the rest of the initial state\n\t},\n\t// Add custom header component\n\tcustomComponents: {\n\t\theader: () => <div className=\"react-chatbot-kit-chat-header\">Conversation with {chatbotName}</div>\n\t},\n\t// Define custom components or widgets here if needed later\n\t// widgets: [],\n\tcustomStyles: {\n\t\t// Optional: Adjust basic styling\n\t\t// botMessageBox: {\n\t\t//   backgroundColor: '#376B7E',\n\t\t// },\n\t\t// chatButton: {\n\t\t//   backgroundColor: '#5ccc9d',\n\t\t// },\n\t},\n} );\n\nexport default configFn;\n\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst domReady = wp.domReady;\nconst { createRoot, render } = wp.element;\n\n/**\n * External dependencies \n * Import manually to avoid ES module issues\n */\nimport { Chatbot, createChatBotMessage } from 'react-chatbot-kit';\nimport 'react-chatbot-kit/build/main.css';\n\n/**\n * Internal dependencies\n */\nimport configFn from './chatbot/config';\nimport MessageParserClass from './chatbot/MessageParser';\nimport ActionProvider from './chatbot/ActionProvider';\nimport './frontend.scss'; // For custom frontend styles\n\n// Create global storage for chatbot instances\nwindow.easyAiChatInstances = window.easyAiChatInstances || {};\n\n/**\n * Find all chat embed containers and mount the chatbot component.\n */\ndomReady( () => {\n\tconst chatContainers = document.querySelectorAll(\n\t\t'.easy-ai-chat-embed-instance' // Target all instances by the common class\n\t);\n\n\t// Check if React 18's createRoot is available (WP 6.2+)\n\tconst useCreateRoot = typeof createRoot === 'function';\n\n\t// Get global data (should be available if script was enqueued)\n\tconst globalData = window.easyAiChatEmbedGlobalData;\n\n\tif (!globalData) {\n\t\tconsole.error('Easy AI Chat Embed: Global data object (easyAiChatEmbedGlobalData) not found. Assets might not have been enqueued correctly.');\n\t\t// Optionally, update container innerHTML to show an error\n\t\tchatContainers.forEach(container => {\n\t\t\tif (!container.innerHTML.includes('noscript')) { // Avoid overwriting noscript tag if JS is disabled\n\t\t\t\t container.innerHTML = '<p>Error: Chatbot global data missing.</p>';\n\t\t\t}\n\t\t});\n\t\treturn; // Stop execution if global data is missing\n\t}\n\n\tchatContainers.forEach( ( container ) => {\n\t\t// Get all instance-specific data directly from data attributes\n\t\tconst instanceId = container.dataset.instanceId;\n\t\tconst selectedModel = container.dataset.selectedModel;\n\t\tconst initialPrompt = container.dataset.initialPrompt;\n\t\tconst chatbotName = container.dataset.chatbotName || 'AIChatBot'; // Default if somehow missing\n\t\tconst isBlock = container.dataset.isBlock === 'true';\n\t\tconst isShortcode = container.dataset.isShortcode === 'true';\n\t\tconst isElementor = container.dataset.isElementor === 'true';\n\n\t\t// Use global data for ajaxUrl and nonce\n\t\tconst ajaxUrl = globalData.ajaxUrl;\n\t\tconst nonce = globalData.nonce;\n\n\t\t// Basic validation (ensure we have necessary data)\n\t\tif ( ! instanceId || ! selectedModel || !ajaxUrl || !nonce || !chatbotName ) {\n\t\t\tconsole.error(\n\t\t\t\t'Easy AI Chat Embed: Missing required data for instance.',\n\t\t\t\tcontainer,\n\t\t\t\t{ instanceId, selectedModel, chatbotName, ajaxUrl, nonce }\n\t\t\t);\n\t\t\t// Update container HTML only if it doesn't already contain the noscript message\n\t\t\tif (!container.querySelector('noscript')) {\n\t\t\t\t container.innerHTML = '<p>Error: Chatbot configuration missing or incomplete.</p>';\n\t\t\t}\n\t\t\treturn; // Skip this container\n\t\t}\n\n\t\t// Store essential data in global window object\n\t\twindow.easyAiChatInstances[instanceId] = {\n\t\t\tajaxUrl,\n\t\t\tnonce,\n\t\t\tinstanceId,\n\t\t\tselectedModel,\n\t\t\tinitialPrompt,\n\t\t\tchatbotName // Store chatbot name\n\t\t};\n\n\t\t// Create a custom attribute to store the current instance ID\n\t\t// This will be used for targeting the specific instance later\n\t\tcontainer.setAttribute('data-eace-current-instance', instanceId);\n\n\t\t// Build state object with instance identifier\n\t\tconst initialState = {\n\t\t\tmessages: [],\n\t\t\tinstanceId: instanceId, // Include instance ID in the state\n\t\t\tselectedModel: selectedModel,\n\t\t\tinitialPrompt: initialPrompt,\n\t\t\tchatbotName: chatbotName,\n\t\t};\n\n\t\ttry {\n\t\t\t// Get configuration with instance details, ajax info, initial state, and type flag\n\t\t\t// Pass chatbotName instead of botName directly if config expects it\n\t\t\tconst botConfig = configFn(instanceId, initialPrompt, selectedModel, chatbotName, ajaxUrl, nonce, initialState, isBlock, isShortcode, isElementor);\n\n\t\t\t// Setup chatbot props - pass CLASSES/constructors directly, not instances or factory functions\n\t\t\tconst chatbotProps = {\n\t\t\t\tconfig: botConfig,\n\t\t\t\tmessageParser: MessageParserClass,\n\t\t\t\tactionProvider: ActionProvider,\n\t\t\t};\n\n\t\t\t// Clear the noscript message / placeholder content\n\t\t\tconst noscriptElement = container.querySelector('noscript');\n\t\t\tif (noscriptElement) {\n\t\t\t\tnoscriptElement.remove();\n\t\t\t}\n\t\t\t// Clear any other potential placeholder text\n\t\t\tcontainer.innerHTML = '';\n\n\t\t\t// Create a wrapper div to target\n\t\t\tconst chatElement = wp.element.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'easy-ai-chat-widget-container' }, // Outer wrapper for potential styling\n\t\t\t\twp.element.createElement(Chatbot, chatbotProps)\n\t\t\t);\n\n\t\t\tif ( useCreateRoot ) {\n\t\t\t\tconst root = createRoot( container );\n\t\t\t\troot.render( chatElement );\n\t\t\t} else {\n\t\t\t\trender( chatElement, container );\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Error initializing chatbot:', error);\n\t\t\tcontainer.innerHTML = '<p>Error initializing chat interface. See console for details.</p>';\n\t\t}\n\t} );\n} ); ","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Main frontend entry point\n * This serves as the main entry point, importing all needed functionality\n */\nimport './frontend';\nimport './block/index';\n\n// Also export any functions that might be needed externally\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"React\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkeasy_ai_chat_embed\"] = globalThis[\"webpackChunkeasy_ai_chat_embed\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","InspectorControls","PanelBody","SelectControl","TextareaControl","TextControl","useEffect","jsx","_jsx","jsxs","_jsxs","modelOptions","label","value","Edit","attributes","setAttributes","clientId","blockProps","selectedModel","initialPrompt","chatbotName","instanceId","children","title","options","onChange","newModel","help","newPrompt","newName","registerBlockType","save","metadata","name","edit","divClass","className","wp","i18n","createClientMessage","createChatBotMessage","ActionProvider","constructor","setStateFunc","setState","handleUserMessage","userMessage","currentState","instance","getAppropriateInstance","ajaxUrl","nonce","showLoadingIndicator","conversationHistory","formatConversationHistory","requestData","action","_ajax_nonce","message","JSON","stringify","result","sendApiRequest","handleApiResponse","error","handleApiError","currentInstanceId","instances","window","easyAiChatInstances","Object","keys","length","console","errorMessage","addMessageToState","instanceKeys","warn","loadingMessage","Array","isArray","messages","map","type","response","fetch","method","headers","body","URLSearchParams","toString","ok","Error","status","json","removeLastMessage","success","data","botResponse","botError","prevState","slice","MessageParser","actionProvider","state","parse","trim","container","document","querySelector","getAttribute","safeState","configFn","initialState","isBlock","isShortcode","isElementor","botName","lang","initialMessages","customComponents","header","customStyles","domReady","createRoot","render","element","Chatbot","MessageParserClass","chatContainers","querySelectorAll","useCreateRoot","globalData","easyAiChatEmbedGlobalData","forEach","innerHTML","includes","dataset","setAttribute","botConfig","chatbotProps","config","messageParser","noscriptElement","remove","chatElement","createElement","root"],"sourceRoot":""}