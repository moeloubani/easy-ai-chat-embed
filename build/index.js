(()=>{var e,t={185:(e,t,a)=>{"use strict";var r,n=a(548),o=a(609);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(null,arguments)}var i=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),r||(r=o.createElement("path",{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144m128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128"})))};const c=window.ReactJSXRuntime,l=()=>(0,c.jsx)("div",{className:"react-chatbot-kit-bot-avatar",children:(0,c.jsx)("div",{className:"react-chatbot-kit-user-avatar-container",children:(0,c.jsx)(i,{className:"react-chatbot-kit-user-avatar-icon"})})}),{__}=wp.i18n,{__:d}=wp.i18n,u=class{constructor(e,t,a){this.createChatBotMessage=e,this.setState=t,this.createClientMessage=a}handleUserMessage=async(e,t)=>{const a=this.getAppropriateInstance(t);if(!a)return;const{instanceId:r,selectedModel:n,initialPrompt:o,ajaxUrl:s,nonce:i}=a;this.showLoadingIndicator();const c=this.formatConversationHistory(t),l={action:"simple_ai_chat_embed_send_message",_ajax_nonce:i,message:e,instanceId:r,selectedModel:n,initialPrompt:o,conversationHistory:JSON.stringify(c)};try{const e=await this.sendApiRequest(s,l);this.handleApiResponse(e)}catch(e){this.handleApiError(e)}};getAppropriateInstance=e=>{let t="";e&&e.instanceId&&(t=e.instanceId);const a=window.simpleAiChatInstances||{};if(0===Object.keys(a).length){console.error("Error: No chat instances found in global storage");const e=this.createChatBotMessage(d("I'm unable to process your request at this time. Please try again later.","simple-ai-chat-embed"));return this.addMessageToState(e),null}let r=null;return r=t&&a[t]?a[t]:a[Object.keys(a)[0]],r};showLoadingIndicator=()=>{const e=this.createChatBotMessage("Thinking...");this.addMessageToState(e)};formatConversationHistory=e=>{let t=[];return e&&Array.isArray(e.messages)&&(t=e.messages.map((e=>({type:e.type,message:e.message})))),t};sendApiRequest=async(e,t)=>{const a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);return await a.json()};handleApiResponse=e=>{if(this.removeLastMessage(),e.success&&e.data.message){const t=this.createChatBotMessage(e.data.message);this.addMessageToState(t)}else{console.error("API Error:",e.data?.message||"Unknown error");const t=this.createChatBotMessage(d("Sorry, I encountered a problem processing your request. Please try again later.","simple-ai-chat-embed"));this.addMessageToState(t)}};handleApiError=e=>{console.error("Error calling backend API:",e),this.removeLastMessage();const t=this.createChatBotMessage(d("Sorry, I was unable to connect to the AI service. Please try again later.","simple-ai-chat-embed"));this.addMessageToState(t)};addMessageToState=e=>{this.setState((t=>({...t,messages:[...t.messages,e]})))};removeLastMessage=()=>{this.setState((e=>({...e,messages:e.messages.slice(0,-1)})))}},m=class{constructor(e,t){this.actionProvider=e,this.state=t||{}}parse(e){if(""!==e.trim()){let t="";try{const a=document.querySelector("[data-eace-current-instance]");a&&(t=a.getAttribute("data-eace-current-instance")),!t&&this.state&&this.state.instanceId&&(t=this.state.instanceId);const r=this.state||{};t&&(r.instanceId=t),this.actionProvider.handleUserMessage(e,r)}catch(a){console.error("Critical error in message processing:",a),this.actionProvider.handleUserMessage(e,{instanceId:t})}}}},h=window.simpleAiChatEmbedGlobalData&&window.simpleAiChatEmbedGlobalData.defaults||{},p=({instanceId:e,selectedModel:t,initialPrompt:a,chatbotName:r,isBlock:o=!1,isShortcode:s=!1})=>{const i=t||h.selectedModel,d=a||h.initialPrompt,p=r||h.chatbotName||"AIChatBot";if(console.log(t,a,r,o,s),console.log(h),!i)return(0,c.jsx)("div",{className:"simple-ai-chat-embed-instance-error",children:"Please select a model."});const g=((e,t,a,r,o,s,i,d,u,m)=>({botName:r,lang:"en",initialMessages:[(0,n.createChatBotMessage)(`Hello! I am ${r}. How can I help you today? (Using ${a})`)],state:{instanceId:e,initialPrompt:t,selectedModel:a,ajaxUrl:o,nonce:s,isBlock:d,isShortcode:u,isElementor:m,chatbotName:r,...i},customComponents:{header:()=>(0,c.jsxs)("div",{className:"react-chatbot-kit-chat-header",children:["Conversation with ",r]}),botAvatar:e=>(0,c.jsx)(l,{...e})},customStyles:{}}))(e,d,i,p,window.simpleAiChatEmbedGlobalData&&window.simpleAiChatEmbedGlobalData.ajaxUrl||"",window.simpleAiChatEmbedGlobalData&&window.simpleAiChatEmbedGlobalData.nonce||"",{},o,s,!1);return(0,c.jsx)("div",{className:"simple-ai-chat-embed-instance","data-instance-id":e,children:(0,c.jsx)(n.Chatbot,{config:g,messageParser:m,actionProvider:u,headerText:p})})},{__:g}=wp.i18n,f=wp.domReady,{createRoot:v,render:b}=wp.element;window.simpleAiChatInstances=window.simpleAiChatInstances||{},f((()=>{(()=>{const e=document.querySelectorAll(".simple-ai-chat-embed-instance"),t="function"==typeof v,a=window.simpleAiChatEmbedGlobalData;if(!a)return console.error("Simple AI Chat Embed: Global data object missing. Assets might not have been enqueued correctly."),void e.forEach((e=>{e.innerHTML.includes("noscript")||(e.innerHTML="<p>Error: Chatbot global data missing.</p>")}));console.log("chatContainers",e),e.forEach((e=>{const r=e.dataset.instanceId,n=e.dataset.selectedModel,o=e.dataset.initialPrompt,s=e.dataset.chatbotName||"AIChatBot",i="true"===e.dataset.isBlock,l="true"===e.dataset.isShortcode,d=a.ajaxUrl,u=a.nonce;if(!(r&&n&&d&&u&&s))return console.error("Simple AI Chat Embed: Missing required data for instance."),void(e.querySelector("noscript")||(e.innerHTML="<p>Error: Chatbot configuration missing or incomplete.</p>"));window.simpleAiChatInstances[r]={ajaxUrl:d,nonce:u,instanceId:r,selectedModel:n,initialPrompt:o,chatbotName:s},e.setAttribute("data-eace-current-instance",r);const m={instanceId:r,selectedModel:n,initialPrompt:o,chatbotName:s,isBlock:i,isShortcode:l};t?v(e).render((0,c.jsx)(p,{...m})):b((0,c.jsx)(p,{...m}),e)}))})()}));const y=window.wp.blocks,w=window.wp.i18n,E=window.wp.blockEditor,S=window.wp.components,P=(window.wp.serverSideRender,window.wp.element),C=[{label:(0,w.__)("Select a Model","simple-ai-chat-embed"),value:""},{label:"ChatGPT 4.0",value:"gpt-4o-mini"},{label:"Claude Sonnet 3.7",value:"claude-3-7-sonnet-20250219"},{label:"Google Gemini",value:"gemini-2.0-flash-lite"}],M=JSON.parse('{"UU":"simple-ai-chat-embed/chat-embed"}');(0,y.registerBlockType)(M.UU,{edit:function({attributes:e,setAttributes:t,clientId:a}){const r=(0,E.useBlockProps)(),{selectedModel:n,initialPrompt:o,chatbotName:s,instanceId:i}=e;return(0,P.useEffect)((()=>{i||t({instanceId:`eace-${a}`})}),[a,i,t]),(0,c.jsxs)("div",{...r,children:[(0,c.jsx)(E.InspectorControls,{children:(0,c.jsxs)(S.PanelBody,{title:(0,w.__)("AI Model Settings","simple-ai-chat-embed"),children:[(0,c.jsx)(S.SelectControl,{label:(0,w.__)("Select AI Model","simple-ai-chat-embed"),value:n,options:C,onChange:e=>t({selectedModel:e})}),(0,c.jsx)(S.TextareaControl,{label:(0,w.__)("Initial System Prompt","simple-ai-chat-embed"),help:(0,w.__)("Optional text prepended to every user prompt to guide the AI.","simple-ai-chat-embed"),value:o,onChange:e=>t({initialPrompt:e})}),(0,c.jsx)(S.TextControl,{label:(0,w.__)("Chatbot Name","simple-ai-chat-embed"),help:(0,w.__)("Optional name for this specific chat instance. Leave blank to use the default.","simple-ai-chat-embed"),value:s,onChange:e=>t({chatbotName:e})})]})}),(0,c.jsx)(p,{instanceId:i,selectedModel:n,initialPrompt:o,chatbotName:s,isBlock:!0})]})},save:function({attributes:e}){const t=E.useBlockProps.save(),{selectedModel:a,initialPrompt:r,instanceId:n}=e,o=(t.className?t.className+" ":"")+"simple-ai-chat-embed-instance";return(0,c.jsx)("div",{...t,className:o,"data-selected-model":a,"data-initial-prompt":r,"data-instance-id":n,children:(0,c.jsx)("noscript",{children:(0,w.__)("Please enable JavaScript to use the AI Chat.","simple-ai-chat-embed")})})}})},438:e=>{(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{default:()=>r});const r=function(e){var t=e.condition,a=e.show,r=e.elseShow,n=function(e){return"function"==typeof e},o=function(e){return e()||(console.warn("Nothing was returned from your render function. Please make sure you are returning a valid React element."),null)};return t?n(a)?o(a):a:!t&&r?n(r)?o(r):r:null};e.exports=a})()},548:(e,t,a)=>{(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{Chatbot:()=>B,createChatBotMessage:()=>d,createClientMessage:()=>m,createCustomMessage:()=>u,default:()=>R,useChatbot:()=>T});const n=a(609);var o=t.n(n);const s=a(438);var i=t.n(s),c=function(){return c=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},c.apply(this,arguments)},l=function(e,t){return{message:e,type:t,id:Math.round(Date.now()*Math.random())}},d=function(e,t){return c(c(c({},l(e,"bot")),t),{loading:!0})},u=function(e,t,a){return c(c({},l(e,t)),a)},m=function(e,t){return c(c({},l(e,"user")),t)},h=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(e)return e.apply(void 0,t)};function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p.apply(this,arguments)}const g=({styles:e={},...t})=>o().createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},t),o().createElement("path",{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"})),f=function(e){var t=e.message,a=e.customComponents;return o().createElement("div",{className:"react-chatbot-kit-user-chat-message-container"},o().createElement(i(),{condition:!!a.userChatMessage,show:h(a.userChatMessage,{message:t}),elseShow:o().createElement("div",{className:"react-chatbot-kit-user-chat-message"},t,o().createElement("div",{className:"react-chatbot-kit-user-chat-message-arrow"}))}),o().createElement(i(),{condition:!!a.userAvatar,show:h(a.userAvatar),elseShow:o().createElement("div",{className:"react-chatbot-kit-user-avatar"},o().createElement("div",{className:"react-chatbot-kit-user-avatar-container"},o().createElement(g,{className:"react-chatbot-kit-user-avatar-icon"})))}))},v=function(){return o().createElement("div",{className:"react-chatbot-kit-chat-bot-avatar"},o().createElement("div",{className:"react-chatbot-kit-chat-bot-avatar-container"},o().createElement("p",{className:"react-chatbot-kit-chat-bot-avatar-letter"},"B")))},b=function(){return o().createElement("div",{className:"chatbot-loader-container"},o().createElement("svg",{id:"dots",width:"50px",height:"21px",viewBox:"0 0 132 58",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o().createElement("g",{stroke:"none",fill:"none"},o().createElement("g",{id:"chatbot-loader",fill:"#fff"},o().createElement("circle",{id:"chatbot-loader-dot1",cx:"25",cy:"30",r:"13"}),o().createElement("circle",{id:"chatbot-loader-dot2",cx:"65",cy:"30",r:"13"}),o().createElement("circle",{id:"chatbot-loader-dot3",cx:"105",cy:"30",r:"13"})))))};var y=function(){return y=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},y.apply(this,arguments)};const w=function(e){var t=e.message,a=e.withAvatar,r=void 0===a||a,s=e.loading,c=e.messages,l=e.customComponents,d=e.setState,u=e.customStyles,m=e.delay,p=e.id,g=(0,n.useState)(!1),f=g[0],w=g[1];(0,n.useEffect)((function(){var e;return function(t,a){var r=750;m&&(r+=m),e=setTimeout((function(){var e=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([],t,!0).find((function(e){return e.id===p}));e&&(e.loading=!1,e.delay=void 0,a((function(t){var a=t.messages,r=a.findIndex((function(e){return e.id===p}));return a[r]=e,y(y({},t),{messages:a})})))}),r)}(c,d),function(){clearTimeout(e)}}),[m,p]),(0,n.useEffect)((function(){m?setTimeout((function(){return w(!0)}),m):w(!0)}),[m]);var E={backgroundColor:""},S={borderRightColor:""};return u&&(E.backgroundColor=u.backgroundColor,S.borderRightColor=u.backgroundColor),o().createElement(i(),{condition:f,show:o().createElement("div",{className:"react-chatbot-kit-chat-bot-message-container"},o().createElement(i(),{condition:r,show:o().createElement(i(),{condition:!!(null==l?void 0:l.botAvatar),show:h(null==l?void 0:l.botAvatar),elseShow:o().createElement(v,null)})}),o().createElement(i(),{condition:!!(null==l?void 0:l.botChatMessage),show:h(null==l?void 0:l.botChatMessage,{message:t,loader:o().createElement(b,null)}),elseShow:o().createElement("div",{className:"react-chatbot-kit-chat-bot-message",style:E},o().createElement(i(),{condition:s,show:o().createElement(b,null),elseShow:o().createElement("span",null,t)}),o().createElement(i(),{condition:r,show:o().createElement("div",{className:"react-chatbot-kit-chat-bot-message-arrow",style:S})}))}))})};function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},E.apply(this,arguments)}const S=({styles:e={},...t})=>o().createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},t),o().createElement("path",{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}));var P=function(){return P=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},P.apply(this,arguments)},C=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};const M=function(e){var t=e.state,a=e.setState,r=e.widgetRegistry,s=e.messageParser,c=e.parse,d=e.customComponents,u=e.actionProvider,m=e.botName,h=e.customStyles,p=e.headerText,g=e.customMessages,v=e.placeholderText,b=e.validator,y=e.disableScrollToBottom,E=e.messageHistory,M=e.actions,O=e.messageContainerRef,k=t.messages,x=(0,n.useState)(""),j=x[0],A=x[1],I=function(){setTimeout((function(){var e;O.current&&(O.current.scrollTop=null===(e=null==O?void 0:O.current)||void 0===e?void 0:e.scrollHeight)}),50)};(0,n.useEffect)((function(){y||I()}));var N=function(){a((function(e){return P(P({},e),{messages:C(C([],e.messages,!0),[l(j,"user")],!1)})})),I(),A("")},T={backgroundColor:""};h&&h.chatButton&&(T.backgroundColor=h.chatButton.backgroundColor);var _="Conversation with "+m;p&&(_=p);var B="Write your message here";return v&&(B=v),o().createElement("div",{className:"react-chatbot-kit-chat-container"},o().createElement("div",{className:"react-chatbot-kit-chat-inner-container"},o().createElement(i(),{condition:!!d.header,show:d.header&&d.header(u),elseShow:o().createElement("div",{className:"react-chatbot-kit-chat-header"},_)}),o().createElement("div",{className:"react-chatbot-kit-chat-message-container",ref:O},o().createElement(i(),{condition:"string"==typeof E&&Boolean(E),show:o().createElement("div",{dangerouslySetInnerHTML:{__html:E}})}),k.map((function(e,n){return"bot"===e.type?o().createElement(o().Fragment,{key:e.id},function(e,n){var s;s=e.withAvatar?e.withAvatar:function(e,t){if(0===t)return!0;var a=e[t-1];return!("bot"===a.type&&!a.widget)}(k,n);var c=P(P({},e),{setState:a,state:t,customComponents:d,widgetRegistry:r,messages:k,actions:M});if(e.widget){var l=r.getWidget(c.widget,P(P({},t),{scrollIntoView:I,payload:e.payload,actions:M}));return o().createElement(o().Fragment,null,o().createElement(w,P({customStyles:h.botMessageBox,withAvatar:s},c,{key:e.id})),o().createElement(i(),{condition:!c.loading,show:l||null}))}return o().createElement(w,P({customStyles:h.botMessageBox,key:e.id,withAvatar:s},c,{customComponents:d,messages:k,setState:a}))}(e,n)):"user"===e.type?o().createElement(o().Fragment,{key:e.id},function(e){var a=r.getWidget(e.widget,P(P({},t),{scrollIntoView:I,payload:e.payload,actions:M}));return o().createElement(o().Fragment,null,o().createElement(f,{message:e.message,key:e.id,customComponents:d}),a||null)}(e)):function(e,t){return!!t[e.type]}(e,g)?o().createElement(o().Fragment,{key:e.id},function(e){var n=g[e.type],s={setState:a,state:t,scrollIntoView:I,actionProvider:u,payload:e.payload,actions:M};if(e.widget){var i=r.getWidget(e.widget,P(P({},t),{scrollIntoView:I,payload:e.payload,actions:M}));return o().createElement(o().Fragment,null,n(s),i||null)}return n(s)}(e)):void 0})),o().createElement("div",{style:{paddingBottom:"15px"}})),o().createElement("div",{className:"react-chatbot-kit-chat-input-container"},o().createElement("form",{className:"react-chatbot-kit-chat-input-form",onSubmit:function(e){if(e.preventDefault(),b&&"function"==typeof b){if(b(j)){if(N(),c)return c(j);s.parse(j)}}else{if(N(),c)return c(j);s.parse(j)}}},o().createElement("input",{className:"react-chatbot-kit-chat-input",placeholder:B,value:j,onChange:function(e){return A(e.target.value)}}),o().createElement("button",{className:"react-chatbot-kit-chat-btn-send",style:T},o().createElement(S,{className:"react-chatbot-kit-chat-btn-send-icon"}))))))},O=function(e){var t=e.message;return o().createElement("div",{className:"react-chatbot-kit-error"},o().createElement("h1",{className:"react-chatbot-kit-error-header"},"Ooops. Something is missing."),o().createElement("div",{className:"react-chatbot-kit-error-container"},o().createElement(w,{message:t,withAvatar:!0,loading:!1,id:1,customStyles:{backgroundColor:""},messages:[]})),o().createElement("a",{href:"https://fredrikoseberg.github.io/react-chatbot-kit-docs/",rel:"noopener norefferer",target:"_blank",className:"react-chatbot-kit-error-docs"},"View the docs"))};var k=function(e){return e.widgets?e.widgets:[]},x=function(e){try{new e}catch(e){return!1}return!0},j=function(){return j=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},j.apply(this,arguments)};const A=function(e,t){var a=this;this.addWidget=function(e,t){var r=e.widgetName,n=e.widgetFunc,o=e.mapStateToProps,s=e.props;a[r]={widget:n,props:s,mapStateToProps:o,parentProps:j({},t)}},this.getWidget=function(e,t){var r=a[e];if(r){var n,o=j(j(j(j({scrollIntoView:t.scrollIntoView},r.parentProps),"object"==typeof(n=r.props)?n:{}),a.mapStateToProps(r.mapStateToProps,t)),{setState:a.setState,actionProvider:a.actionProvider||t.actions,actions:t.actions,state:t,payload:t.payload});return r.widget(o)||null}},this.mapStateToProps=function(e,t){if(e)return e.reduce((function(e,a){return e[a]=t[a],e}),{})},this.setState=e,this.actionProvider=t};var I=function(){return I=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},I.apply(this,arguments)},N=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};const T=function(e){var t=e.config,a=e.actionProvider,r=e.messageParser,s=e.messageHistory,i=e.runInitialMessagesWithHistory,c=e.saveMessages,l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["config","actionProvider","messageParser","messageHistory","runInitialMessagesWithHistory","saveMessages"]),h="",p="";if(!t||!a||!r)return{configurationError:h="I think you forgot to feed me some props. Did you remember to pass a config, a messageparser and an actionprovider?"};var g=function(e){var t=[];return e.initialMessages||t.push("Config must contain property 'initialMessages', and it expects it to be an array of chatbotmessages."),t}(t);if(g.length)return{invalidPropsError:p=g.reduce((function(e,t){return e+t}),"")};var f=function(e){return e.state?e.state:{}}(t);s&&Array.isArray(s)?t.initialMessages=N([],s,!0):"string"==typeof s&&Boolean(s)&&(i||(t.initialMessages=[]));var v,b,y,w=o().useState(I({messages:N([],t.initialMessages,!0)},f)),E=w[0],S=w[1],P=o().useRef(E.messages),C=o().useRef(),M=o().useRef();(0,n.useEffect)((function(){P.current=E.messages})),(0,n.useEffect)((function(){s&&Array.isArray(s)&&S((function(e){return I(I({},e),{messages:s})}))}),[]),(0,n.useEffect)((function(){var e=M.current;return function(){if(c&&"function"==typeof c){var t=e.innerHTML.toString();c(P.current,t)}}}),[]),(0,n.useEffect)((function(){C.current=E}),[E]);var O=a,j=r;return x(O)&&x(j)?(v=new a(d,S,m,C.current,u,l),b=new A(S,v),y=new r(v,C.current),k(t).forEach((function(e){return null==b?void 0:b.addWidget(e,l)}))):(v=a,y=r,b=new A(S,null),k(t).forEach((function(e){return null==b?void 0:b.addWidget(e,l)}))),{widgetRegistry:b,actionProv:v,messagePars:y,configurationError:h,invalidPropsError:p,state:E,setState:S,messageContainerRef:M,ActionProvider:O,MessageParser:j}};var _=function(){return _=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},_.apply(this,arguments)};const B=function(e){var t=e.actionProvider,a=e.messageParser,r=e.config,n=e.headerText,s=e.placeholderText,i=e.saveMessages,c=e.messageHistory,l=e.runInitialMessagesWithHistory,u=e.disableScrollToBottom,m=e.validator,h=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["actionProvider","messageParser","config","headerText","placeholderText","saveMessages","messageHistory","runInitialMessagesWithHistory","disableScrollToBottom","validator"]),p=T(_({config:r,actionProvider:t,messageParser:a,messageHistory:c,saveMessages:i,runInitialMessagesWithHistory:l},h)),g=p.configurationError,f=p.invalidPropsError,v=p.ActionProvider,b=p.MessageParser,y=p.widgetRegistry,w=p.messageContainerRef,E=p.actionProv,S=p.messagePars,P=p.state,C=p.setState;if(g)return o().createElement(O,{message:g});if(f.length)return o().createElement(O,{message:f});var k=function(e){return e.customStyles?e.customStyles:{}}(r),j=function(e){return e.customComponents?e.customComponents:{}}(r),A=function(e){return e.botName?e.botName:"Bot"}(r),I=function(e){return e.customMessages?e.customMessages:{}}(r);return x(v)&&x(b)?o().createElement(M,{state:P,setState:C,widgetRegistry:y,actionProvider:E,messageParser:S,customMessages:I,customComponents:_({},j),botName:A,customStyles:_({},k),headerText:n,placeholderText:s,validator:m,messageHistory:c,disableScrollToBottom:u,messageContainerRef:w}):o().createElement(v,{state:P,setState:C,createChatBotMessage:d},o().createElement(b,null,o().createElement(M,{state:P,setState:C,widgetRegistry:y,actionProvider:v,messageParser:b,customMessages:I,customComponents:_({},j),botName:A,customStyles:_({},k),headerText:n,placeholderText:s,validator:m,messageHistory:c,disableScrollToBottom:u,messageContainerRef:w})))},R=B;e.exports=r})()},609:e=>{"use strict";e.exports=window.React}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,a,n,o)=>{if(!a){var s=1/0;for(d=0;d<e.length;d++){for(var[a,n,o]=e[d],i=!0,c=0;c<a.length;c++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,n,o]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[s,i,c]=a,l=0;if(s.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(c)var d=c(r)}for(t&&t(a);l<s.length;l++)o=s[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},a=globalThis.webpackChunksimple_ai_chat_embed=globalThis.webpackChunksimple_ai_chat_embed||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[350],(()=>r(185)));n=r.O(n)})();